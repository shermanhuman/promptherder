# promptherder

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Write your AI coding instructions once, distribute them to every agent you use.

```
.promptherder/agent/     (you edit here)
        │
        │  promptherder
        │
        ├──→ .agent/     (Antigravity)
        ├──→ .github/    (VS Code Copilot)
        └──→ ???/        (easy to add)
```

No more copy-pasting rules between `.agent/` and `.github/`. Edit in one place, run `promptherder`, done.

## Install

```bash
go install github.com/shermanhuman/promptherder/cmd/promptherder@latest
```

## Quick Start

```bash
# Get Compound V (an AI coding methodology) and sync to all your agents
promptherder pull https://github.com/shermanhuman/compound-v
promptherder
```

Or if you just want to manage your own rules:

```bash
# Create your source directory
mkdir -p .promptherder/agent/rules

# Add a rule
cat > .promptherder/agent/rules/project.md << 'EOF'
# Project Rules

- All API routes require authentication.
- Use structured logging with slog.
- Prefer table-driven tests.
EOF

# Sync to all agents
promptherder
```

## Commands

| Command | What it does |
|---|---|
| `promptherder` | Sync to all targets |
| `promptherder copilot` | Sync to `.github/` only |
| `promptherder antigravity` | Sync to `.agent/` only |
| `promptherder pull <url>` | Pull a herd from GitHub |
| `promptherder --dry-run` | Show what would be written |

## Herds

A **herd** is a shareable package of AI coding instructions — rules, skills, and workflows bundled together. [Compound V](https://github.com/shermanhuman/compound-v) is a herd. You can make your own.

Pull any herd from GitHub:

```bash
promptherder pull https://github.com/someone/their-cool-herd
promptherder
```

The herd's rules, skills, and workflows get merged into your `.promptherder/agent/` source and synced to all targets on the next run.

## Source Format

Rules live in `.promptherder/agent/rules/*.md`:

```markdown
# Hard Rules

- Do not generate plaintext secrets.
- All changes go through Git.
```

Path-scoped rules use frontmatter:

```markdown
---
applyTo: "**/*.sh"
---

# Shell Script Safety

Use `set -Eeuo pipefail`.
```

## Manifest

promptherder tracks written files in `.promptherder/manifest.json` for idempotent cleanup — if a source file is removed, its synced copies get cleaned up too. Commit this file.

## .gitignore

You'll probably want to ignore the generated target files and conversation state:

```gitignore
# Generated agent instructions (regenerated by promptherder)
.agent/
.github/copilot-instructions.md

# Conversation artifacts (ephemeral)
.promptherder/convos/
```

Keep `.promptherder/agent/`, `.promptherder/hard-rules.md`, and `.promptherder/future-tasks.md` tracked — they're your project knowledge.

## Compound V

promptherder ships with **[Compound V](https://github.com/shermanhuman/compound-v)**, an AI coding methodology forked from [obra/superpowers](https://github.com/obra/superpowers). Five slash commands (`/plan`, `/execute`, `/review`, `/idea`, `/rule`), TDD discipline, 10-check parallel code reviews, YOLO mode for full autonomy. See the [Compound V README](https://github.com/shermanhuman/compound-v) for the full walkthrough with examples.

## Credits

- [obra/superpowers](https://github.com/obra/superpowers) — the original methodology
- [anthonylee991/gemini-superpowers-antigravity](https://github.com/anthonylee991/gemini-superpowers-antigravity) — Antigravity adaptation
